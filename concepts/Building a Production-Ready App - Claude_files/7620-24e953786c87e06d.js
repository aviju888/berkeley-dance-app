"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7620],{80298:function(e,t,n){n.d(t,{P:function(){return d}});var r=n(27573),a=n(41464),l=n(15489),i=n(53067),s=n(5942),o=n(87970),c=n(90678),u=n(57908);let d=e=>{let{type:t,size:n,className:d,isLoading:p=!1}=e;return(0,r.jsx)("div",{className:(0,u.Z)("bg-bg-100 text-text-500 flex items-center justify-center rounded-l-[inherit]","default"===n&&"w-14","sm"===n&&"w-11",d),children:p?(0,r.jsx)(a.g,{size:"sm"}):(0,r.jsx)(()=>{switch(t){case l.JP.Markdown:return(0,r.jsx)(i.X,{size:24});case l.JP.Svg:return(0,r.jsx)(s.j,{size:24});case l.JP.Html:return(0,r.jsx)(o.T,{size:24});case l.JP.Code:case l.JP.Text:default:return(0,r.jsx)(c.E,{size:24})}},{})})}},62071:function(e,t,n){n.d(t,{w:function(){return l}});var r=n(27573),a=n(57908);function l(e){let{Icon:t,children:n,isAssistant:l=!0,...i}=e;return(0,r.jsxs)("button",{...i,className:(0,a.Z)("flex flex-row items-center gap-1 rounded-md p-1 py-0.5 text-xs transition-opacity delay-100",l?"hover:bg-bg-200":"hover:bg-bg-400",i.className),children:[t&&(0,r.jsx)(t,{size:12}),n]})}n(7653)},41839:function(e,t,n){n.d(t,{d8:function(){return U},EY:function(){return J},J$:function(){return V},ux:function(){return q}});var r=n(85565),a=n(27573);n(18305);var l=n(15489),i=n(51702);let s=RegExp("<".concat(l.Km,"\\s+(.*?)\\s*\\/>"),"g"),o=()=>e=>{(0,i.Vn)(e,"html",(e,t,n)=>{let r=e.value.match(s);if(r){let e=r.map(e=>{let t=e.replace("<".concat(l.Km," "),"").replace(/\s*\/>/,"").trim(),{id:n,type:r,title:a,language:i,isClosed:s}=(0,l.l2)(t),o={id:n,title:a,type:r,isClosed:s};return i&&(o.language=i),{type:"artifactComponent",data:{hName:"artifactComponent",hProperties:o}}});n.children.splice(t,1,...e)}})};var c=n(4026);let u=()=>e=>{(0,i.Vn)(e,"list",e=>{e.spread=!1}),(0,i.Vn)(e,"listItem",e=>{e.spread=!1})};var d=n(54811),p=n(7653),x=n(46385).Buffer;function m(){return function(e,t){let n=x.isBuffer(t.value)?t.value.toString("utf8"):"string"==typeof t.value?t.value:String(t.value);(0,i.Vn)(e,(e,t,r)=>{if(void 0===t||void 0===r||void 0===e.children)return;let a=!1,l=[];for(let t of e.children)if("text"===t.type){let[e,r]=function(e){let t=!1,n=[],r=e.split("\n"),a="",l=[];for(let e of r){if(!a&&("$$$"===e||"$$"===e)){a=e;continue}if(a&&a===e){if(a="",l){let e=l.join("\n");n.push({type:"math",meta:null,value:e,data:{hName:"div",hProperties:{className:["math","math-display"]},hChildren:[{type:"text",value:e}]}}),t=!0,l=[]}continue}if(a){l.push(e);continue}for(let r=0;r<e.length;r++){let a=function(e,t){let n=!1;do{let r=(n=(t=e.indexOf("$",t))>-1&&function(e,t){let n=!h(e,t-1,"$"),r=!h(e,t+1," "),a=!h(e,t+1,"$");return!f(e,t)&&n&&r&&a}(e,t))?function(e,t){let n=function(e,t){if(t<=0)return t;let n=e.lastIndexOf(" ",t);return n>-1?n+1:0}(e,t),r=/^(\$\w+!?)?\$?[A-Z]+\$?[0-9]+(:(\$\w+!?)?\$?[A-Z]+\$?[0-9]+)?/g.exec(e.slice(n)),a=r?n+r[0].length-1:-1;return a>-1&&h(e,n,"$")&&h(e,a+1,"$")?-1:a}(e,t):-1;r>-1&&r>t?(n=!1,t=r+1):!n&&t>-1&&(t+=1)}while(t>-1&&!n);return t}(e,r),l=a>-1?function(e,t){let n=!1;do(n=(t=e.indexOf("$",t))>-1&&function(e,t){var n;let r=!h(e,t-1," "),a=(n=t+1)<0||n>=e.length||!(e[n]>="0")||!(e[n]<="9");return!f(e,t)&&r&&a}(e,t))||!(t>-1)||(t+=1);while(t>-1&&!n);return t}(e,a+1):-1;if(a>-1&&l>-1){a>r&&n.push({type:"text",value:e.substring(r,a)});let i=e.substring(a+1,l);n.push({type:"inlineMath",value:i,data:{hName:"span",hProperties:{className:["math","math-inline"]},hChildren:[{type:"text",value:i+"\n"}]}}),r=l,t=!0}else{r<e.length&&n.push({type:"text",value:e.substring(r)+"\n"});break}}}return[t,n]}(t.position?n.slice(t.position.start.offset,t.position.end.offset):t.value);e?(a=!0,l.push(...r)):l.push(t)}else l.push(t);if(a){if(l.some(e=>"math"===e.type)){let e=function(e){let t=[],n=[],r=()=>{let e={type:"paragraph",children:t};n.push(e)};for(let a of e)"math"===a.type?(t.length>0&&(r(),t=[]),n.push(a)):t.push(a);return t.length>0&&(r(),t=[]),n}(l);r.children.splice(t,1,...e)}else e.children=l}})}}function h(e,t,n){return!(t<0)&&!(t>=e.length)&&e[t]===n}function f(e,t){return h(e,t-1,"\\")&&!f(e,t-1)}let g=()=>{let[e,t]=(0,p.useState)({remarkMath:void 0,rehypeKatex:void 0,inHouseLatexPlugin:m});return(0,p.useEffect)(()=>{(async()=>{let[e,r]=await Promise.all([n.e(829).then(n.bind(n,30829)),Promise.all([n.e(8287),n.e(9732)]).then(n.bind(n,9732))]);t({remarkMath:e.default,rehypeKatex:r.default,inHouseLatexPlugin:m})})()},[]),e};var v=n(17299),b=n(82880),y=n(72001),j=n(57908),w=n(95270),N=n(6323),k=n(67088),_=n(80298),C=n(17886),S=n(50513),$=n(75009),P=n(65880),A=n(90345);let z={highlightedCitation:null,setHighlightedCitation:n.n(A)()},E=(0,p.createContext)(z);function M(e){let{children:t,blockCitations:n}=e,[r,l]=(0,p.useState)(null);return(0,a.jsx)(E.Provider,{value:{highlightedCitation:r,setHighlightedCitation:l,blockCitations:n},children:t})}function O(e){let{docUuids:t}=e,{blockCitations:n}=(0,p.useContext)(E),r=(0,y.yI)(t,n),l=(0,y.XR)();return r.length&&l?r.map((e,t)=>(0,a.jsx)("span",{className:(0,j.Z)("mr-1",0===t&&"ml-1"),children:(0,a.jsx)(C.u,{tooltipContent:(0,a.jsx)(D,{citation:e}),contentStyle:"citation",side:"right",delayDuration:0,children:(0,a.jsx)("span",{children:(0,a.jsx)(Z,{citation:e})})})},e.doc_uuid)):null}let Z=e=>{let{citation:t}=e,n="webpage"===t.type?"Web":t.document_title,r=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,j.Z)("transition-colors h-[18px] max-w-[120px] overflow-hidden px-1.5 inline-flex items-center text-text-300 font-styrene text-xs tracking-tight rounded-full border-0.5 border-border-300 bg-bg-200",t.url&&"group-hover/tag:bg-accent-secondary-900 group-hover/tag:border-accent-secondary-100/20"),children:(0,a.jsx)("p",{className:"text-nowrap",children:n||"Untitled"})}),(0,a.jsx)("div",{className:(0,j.Z)("transition w-[24px] opacity-100 h-[17px] absolute left-[95.5px] inline rounded-r-full flex items-center px-1.5 text-text-300 bg-gradient-to-r from-bg-200/0 via-bg-200/50 via-30% to-bg-200/100",t.url&&"group-hover/tag:opacity-0")})]});return t.url?(0,a.jsxs)("a",{href:t.url,target:"_blank",className:"group/tag relative h-[18px] cursor-pointer rounded-full inline-flex items-center overflow-hidden -translate-y-px",children:[r,(0,a.jsx)("div",{className:"transition group-hover/tag:opacity-100 opacity-0 h-[17px] absolute right-[0.5px] inline rounded-r-full flex items-center px-1.5 bg-gradient-to-r from-accent-secondary-900/0 via-accent-secondary-900/100 via-30% to-accent-secondary-900/100",children:(0,a.jsx)($.G,{size:14,className:"opacity-50 text-accent-secondary-000"})})]}):(0,a.jsx)("span",{tabIndex:0,className:"relative h-[18px] rounded-full inline-flex items-center overflow-hidden -translate-y-px",children:r})};function D(e){let{citation:t}=e,n=t.document_title||t.url;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h3",{className:"font-styrene text-sm font-medium",children:n}),(0,a.jsxs)("span",{className:"flex flex-row items-center gap-1 text-text-500 text-xs",children:["webpage"===t.type?(0,a.jsx)(P.default,{width:14,height:14,src:"",alt:"icon"}):(0,a.jsx)(S.k6,{size:14,variant:S.cT.DOCS}),(0,a.jsx)("p",{children:"webpage"===t.type?t.url:"Google Doc"})]})]})}var T=n(11096),I=n(74651);let R=e=>{let{isOpen:t=!1,url:n,onClose:r,onConfirm:l}=e;return(0,a.jsxs)(I.u_,{title:"Open a link from the web",isOpen:t,onClose:r,children:[(0,a.jsxs)("p",{className:"break-words",children:["You’re about to be navigated to ",n,". Is that okay?"]}),(0,a.jsxs)(I.dm,{children:[(0,a.jsx)(T.z,{variant:"outline",onClick:l,children:"Continue"}),(0,a.jsx)(T.z,{variant:"secondary",onClick:r,children:"Cancel"})]})]})};var F=n(4974);function K(){let e=(0,r._)(["\n  tracking-tighter\n  flex-1\n  text-left\n  mr-4\n  [&_a]:font-medium\n  [&_a]:hover:underline\n"]);return K=function(){return e},e}let J=[],q=(0,p.memo)(e=>{var t,n;let{text:r,blockCitations:l,hasLinkRef:i,hasCodeRef:s,className:x,linkTarget:m="_blank",isStreaming:h=!1,flagShowCodeHeader:f,unsafeAllowNavigationWithoutConfirmation:b,onOpenArtifact:_,isLastMessage:C,publishedArtifacts:S,useInHouseLatexPlugin:$}=e,P=(0,p.useRef)(null),A=null!=S?S:J,z=(0,y.XR)();(0,p.useEffect)(()=>{let e=e=>{var t,n,r;let a=window.getSelection();if(a&&(null===(t=P.current)||void 0===t?void 0:t.contains(a.anchorNode))){let t=a.getRangeAt(0).cloneContents(),l=document.createElement("div");for(let e of(l.appendChild(t),l.getElementsByTagName("*")))e.removeAttribute("color"),e.removeAttribute("fontFamily");null===(n=e.clipboardData)||void 0===n||n.setData("text/html",l.innerHTML),null===(r=e.clipboardData)||void 0===r||r.setData("text/plain",l.textContent||""),e.preventDefault()}};return document.addEventListener("copy",e),()=>{document.removeEventListener("copy",e)}},[]);let E=null!==(n=null===(t=(0,v.T)())||void 0===t?void 0:t.preview_feature_uses_latex)&&void 0!==n&&n,Z=!!_,{remarkMath:D,rehypeKatex:T,inHouseLatexPlugin:I}=g(),R=(0,p.useMemo)(()=>(0,d.jA)(r),[r]),K=(0,p.useMemo)(()=>({h1:e=>{let{node:t,children:n,...r}=e;return(0,a.jsx)("h1",{className:"text-2xl font-bold mt-1 text-text-200",...r,children:n})},h2:e=>{let{node:t,children:n,...r}=e;return(0,a.jsx)("h2",{className:"text-xl font-bold text-text-200 mt-1 -mb-0.5",...r,children:n})},h3:e=>{let{node:t,children:n,...r}=e;return(0,a.jsx)("h3",{className:"text-lg font-bold text-text-200 mt-1 -mb-1.5",...r,children:n})},h4:e=>{let{node:t,children:n,...r}=e;return(0,a.jsx)("h4",{className:"text-base font-bold text-text-200 mt-1",...r,children:n})},p:e=>{let{node:t,children:n,...r}=e;return(0,a.jsx)(F.M.p,{...r,children:n})},blockquote:e=>{let{node:t,...n}=e;return(0,a.jsx)("blockquote",{className:"border-border-200 border-l-4 pl-4",...n})},li:e=>{let{node:t,ordered:n,children:r,...l}=e;return(0,a.jsx)(F.M.li,{...l,children:r})},ul:e=>{let{node:t,ordered:n,...r}=e;return(0,a.jsx)(F.M.ul,{...r})},ol:e=>{let{node:t,ordered:n,...r}=e;return(0,a.jsx)(F.M.ol,{...r})},img:e=>{let{node:t,...n}=e;return b?(0,a.jsx)("img",{...n}):(0,a.jsx)(H,{...n})},code(e){let{node:t,...n}=e;return s&&!n.inline&&(s.current=!0),(0,a.jsx)(F.M.code,{...n,flagShowCodeHeader:f})},a(e){let{node:t,...n}=e;return i&&(i.current=!0),b?(0,a.jsx)("a",{target:m,...n}):(0,a.jsx)(L,{linkTarget:m,...n})},table(e){let{node:t,...n}=e;return(0,a.jsx)("pre",{className:"font-styrene border-border-100/50 overflow-x-scroll whitespace-nowrap rounded border-[0.5px] shadow-[0_2px_12px_rgba(0,0,0,0.05)]",children:(0,a.jsx)("table",{className:"bg-bg-100 min-w-full border-separate border-spacing-0 text-sm leading-[1.88888]",...n})})},thead(e){let{node:t,...n}=e;return(0,a.jsx)("thead",{className:"border-b-border-100/50 border-b-[0.5px] text-left",...n})},tr(e){let{node:t,isHeader:n,...r}=e;return(0,a.jsx)("tr",{className:"[tbody>&]:odd:bg-bg-500/10",...r})},td(e){let{node:t,isHeader:n,children:r,...l}=e;return(0,a.jsx)("td",{className:"border-t-border-100/50 [&:not(:first-child)]:-x-[hsla(var(--border-100) / 0.5)] border-t-[0.5px] px-2 [&:not(:first-child)]:border-l-[0.5px]",...l,children:r})},th(e){let{node:t,isHeader:n,children:r,...l}=e;return(0,a.jsx)("th",{className:"text-text-000 [&:not(:first-child)]:-x-[hsla(var(--border-100) / 0.5)] font-400 px-2 [&:not(:first-child)]:border-l-[0.5px]",...l,children:r})},artifactComponent(e){let{node:t}=e;return(0,a.jsx)(U,{properties:t.properties,isStreaming:h,isLastMessage:C,onOpenArtifact:_,publishedArtifacts:A})},...z?{[y.KF]:e=>{let{node:t,...n}=e;return(0,a.jsx)(O,{...n,docUuids:t.properties.docUuids})}}:null}),[z,b,s,f,i,m,h,C,_,A]),q=(0,p.useMemo)(()=>{let e=[k.Z,u];return Z&&e.push(o),E&&D&&($?e.push(I):e.push([D,{singleDollarTextMath:!1}])),z&&(e.push(N.Z),e.push(c.Su)),e},[Z,E,D,z,$,I]),V=(0,p.useMemo)(()=>{let e=[];return E&&T&&e.push([T,{errorColor:"inherit"}]),e},[T,E]);return(0,a.jsx)("div",{ref:P,children:(0,a.jsx)(M,{blockCitations:l,children:(0,a.jsx)(w.D,{className:(0,j.Z)("grid-cols-1 grid gap-2.5 [&_>_*]:min-w-0",x),remarkPlugins:q,rehypePlugins:V,components:K,children:R})})})});q.displayName="StandardMarkDown";let H=e=>{let{src:t,...n}=e,[r,l]=(0,p.useState)(!1),i=()=>{window.open(t,"_blank")};return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>l(!0),className:"bg-bg-300 border-border-300 font-styrene text-text-300 inline-block grid h-32 w-40 items-center justify-items-center rounded-xl border p-4",children:"Show Image"}),(0,a.jsx)(R,{isOpen:r,url:t,onClose:()=>l(!1),onConfirm:()=>{i(),l(!1)}})]}):(0,a.jsx)("img",{...n})},L=e=>{let{linkTarget:t,href:n,...r}=e,[l,i]=(0,p.useState)(!1),s=()=>{window.open(n,t)};return n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{onClick:e=>{e.preventDefault(),i(!0)},href:n,...r}),(0,a.jsx)(R,{isOpen:l,url:n,onClose:()=>i(!1),onConfirm:()=>{s(),i(!1)}})]}):(0,a.jsx)("a",{...r})},U=e=>{let{properties:t,isStreaming:n,onOpenArtifact:r,isLastMessage:i,publishedArtifacts:s}=e;return(0,a.jsx)("div",{className:"font-styrene relative",children:(0,a.jsxs)("button",{className:"border-0.5 border-border-200 bg-bg-100 hover:border-border-100 flex flex-1 items-stretch rounded-lg text-left transition-all hover:drop-shadow-sm active:scale-[0.9875]",onClick:()=>{r&&t.id&&r(t.id)},"aria-label":"Preview contents",children:[(0,a.jsx)(_.P,{size:"default",type:t.type,isLoading:n&&i&&!t.isClosed,className:"bg-bg-200 border-border-200 border-r-[0.5px]"}),(0,a.jsxs)("div",{className:"padding min-w-0 flex-1 px-4 py-3",children:[(0,a.jsx)("div",{className:"break-words text-sm font-medium leading-tight",children:t.id&&t.title?(0,a.jsx)(a.Fragment,{children:t.title}):"Generating..."}),(0,a.jsx)("div",{className:"text-text-400 line-clamp-1 text-xs min-h-4",children:t.type?(0,a.jsxs)(a.Fragment,{children:["Click to open ",l.yc[t.type].displayName]}):null}),s.some(e=>e.artifact_identifier===t.id&&!0!==e.deleted)&&(0,a.jsx)("div",{className:"text-accent-secondary-100 bg-accent-secondary-900 inline-block rounded-lg px-1.5 py-1 text-xs font-medium",children:"Published"})]})]})})},V=b.q.div(K())},4974:function(e,t,n){n.d(t,{M:function(){return m},S:function(){return x}});var r=n(27573),a=n(62071),l=n(42152),i=n(57908),s=n(30675),o=n(7653),c=n(28711),u=n(59679),d=n(70318);let p=(0,o.memo)(e=>{let{node:t,stylesheet:n,style:r,useInlineStyles:a,index:l}=e;return(0,c.ZP)({node:t,stylesheet:n,style:r,useInlineStyles:a,key:l})},(e,t)=>(0,s.vZ)(e.node,t.node));p.displayName="Row";let x=e=>{let{rows:t,stylesheet:n,useInlineStyles:a}=e;return t.map((e,t)=>(0,r.jsx)(p,{index:t,node:e,stylesheet:n,useInlineStyles:a},t))},m={h1:e=>(0,r.jsx)("h1",{className:"mt-2 mb-2 font-bold",...e}),p:e=>(0,r.jsx)("p",{className:"whitespace-pre-wrap break-words",...e}),li:e=>(0,r.jsx)("li",{className:"whitespace-normal break-words",...e}),ul:e=>(0,r.jsx)("ul",{className:"[&:not(:last-child)_ul]:pb-1 [&:not(:last-child)_ol]:pb-1 list-disc space-y-1.5 pl-7",...e}),ol:e=>(0,r.jsx)("ol",{className:"[&:not(:last-child)_ul]:pb-1 [&:not(:last-child)_ol]:pb-1 list-decimal space-y-1.5 pl-7",...e}),blockQuote:e=>(0,r.jsx)("blockquote",{className:"border-l-2 border-border-100 pl-2",...e}),code:e=>{let{inline:t,className:n,children:s,flagShowCodeHeader:o=!0}=e,c=/language-(\w+)/.exec(n||""),p=String(s).trimEnd(),{didCopy:m,copyToClipboard:h}=(0,l.m)(p);return t?(null==n?void 0:n.includes("math"))?(0,r.jsx)("span",{className:n,children:s}):(0,r.jsx)("code",{className:(0,i.Z)("bg-text-200/5 border border-0.5 border-border-300 text-danger-000 whitespace-pre-wrap rounded-[0.3rem] px-1 py-px text-[0.9rem]",n),children:s}):(0,r.jsxs)("div",{className:"relative flex flex-col rounded-lg",children:[!0===o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-text-300 absolute pl-3 pt-2.5 text-xs",children:c?c[1]:""}),(0,r.jsx)("div",{className:"pointer-events-none sticky my-0.5 ml-0.5 flex items-center justify-end px-1.5 py-1 mix-blend-luminosity top-0",children:(0,r.jsx)("div",{className:"from-bg-300/90 to-bg-300/70 pointer-events-auto rounded-md bg-gradient-to-b p-0.5 backdrop-blur-md",children:(0,r.jsxs)(a.w,{className:"opacity-60 hover:opacity-100",onClick:h,children:[(0,r.jsx)(l.f,{didCopy:m,size:14,className:"text-text-500 mr-px -translate-y-[0.5px]"}),(0,r.jsx)("span",{className:"text-text-200 pr-0.5",children:"Copy"})]})})})]}):null,(0,r.jsx)("div",{children:(0,r.jsx)(u.Z,{className:"code-block__code !my-0 !rounded-lg !text-sm !leading-relaxed",language:c?c[1]:"",PreTag:"div",style:d.Z,renderer:x,children:p})})]})}}},4026:function(e,t,n){n.d(t,{Su:function(){return c},TY:function(){return o}});var r=n(51702),a=n(72001),l=n(13623),i=n(97712);let s=i.z.object({docs:i.z.string()});function o(e){if(!(null==e?void 0:e.length))return"";let t=e.map(e=>e.doc_uuid).join(",");return function(e){let{tagName:t,inlineContent:n,attributes:r}=e,a=r?"{"+Object.entries(r).map(e=>{let[t,n]=e;return"".concat(t,'="').concat(n,'"')}).join(" ")+"}":"";return":".concat(t,"[").concat(n,"]").concat(a)}({tagName:a.KF,inlineContent:"",attributes:{docs:t}})}let c=function(e,t){let n=n=>{(0,r.Vn)(n,void 0,n=>{if(("textDirective"===n.type||"leafDirective"===n.type||"containerDirective"===n.type)&&n.name===e){let a=t(n.attributes);if(n.data={hName:e,hProperties:a},"containerDirective"===n.type&&n.children){let e=[...n.children];for(;e.length;){let t=e.shift();if(t){var r;t.data={...t.data,hProperties:{...(null===(r=t.data)||void 0===r?void 0:r.hProperties)||null,...a}},"children"in t&&e.push(...t.children)}}}}})};return()=>n}(a.KF,e=>{try{return{docUuids:s.parse(e).docs.split(",")}}catch(e){return(0,l.Tb)(e),{docUuids:[]}}})},54811:function(e,t,n){function r(e){return e.replace(/(^|\n)(\s?)•(\s?)/g,"$1$2- ")}n.d(t,{Yl:function(){return l},jA:function(){return r}}),n(68068);let a=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w]*))?)/gi;function l(e){if(!e)return[];let t=e.matchAll(a),n=new Set;for(let e of t)Array.isArray(e)&&e[0]&&n.add(e[0]);return Array.from(n)}},15489:function(e,t,n){n.d(t,{An:function(){return N},HZ:function(){return _},JP:function(){return a},Km:function(){return b},VA:function(){return p},kE:function(){return u},l2:function(){return y},tE:function(){return k},w0:function(){return w},yc:function(){return d}});var r,a,l,i=n(97712),s=n(92068),o=n(6932);(r=a||(a={})).Text="text/plain",r.Markdown="text/markdown",r.Html="text/html",r.Code="application/vnd.ant.code",r.Svg="image/svg+xml",r.Mermaid="application/vnd.ant.mermaid",r.React="application/vnd.ant.react",(l||(l={})).Repl="application/vnd.ant.repl";let c=i.z.string().nullish().transform(e=>null!=e?e:void 0),u=i.z.object({version_uuid:c,command:i.z.enum(["create","update","rewrite"]).optional().catch(void 0),id:c,title:c,type:i.z.nativeEnum(a).optional().catch(void 0),language:c,content:c,old_str:c,new_str:c}),d={"text/plain":{syntaxName:"plaintext",displayName:"text",extension:()=>"txt"},"text/markdown":{syntaxName:"markdown",displayName:"document",extension:()=>"md"},"text/html":{syntaxName:"html",displayName:"website",extension:()=>"html"},"image/svg+xml":{syntaxName:"svg",displayName:"image",extension:()=>"svg"},"application/vnd.ant.code":{syntaxName:"plaintext",displayName:"code",extension:e=>{switch(null==e?void 0:e.language){case"python":return"py";case"javascript":return"js";case"typescript":return"ts";case"java":return"java";case"csharp":return"cs";case"go":return"go";case"rust":return"rs";case"ruby":return"rb";case"php":return"php";case"swift":return"swift";case"kotlin":return"kt";case"dart":return"dart";case"scala":return"scala";case"perl":return"pl";case"elixir":return"ex";case"haskell":return"hs";case"clojure":return"clj";case"r":return"r";case"groovy":return"groovy";case"bash":return"sh";case"css":return"css";case"scss":return"scss";case"less":return"less";case"sql":return"sql";case"graphql":return"graphql";case"json":return"json";case"html":return"html";default:return"txt"}}},"application/vnd.ant.mermaid":{syntaxName:"mermaid",displayName:"diagram",extension:()=>"mermaid"},"application/vnd.ant.react":{syntaxName:"tsx",displayName:"component",extension:()=>"tsx"}},p=e=>{let t=d[e.type];return"application/vnd.ant.code"!==e.type?t.extension():t.extension(e)},x="antArtifact",m="<".concat(x,"(?:\\s+([^>]*)>|(?!>)\\S*)"),h="</".concat(x,">"),f=RegExp("".concat(m,"([\\s\\S]*?)(?:").concat(h,"|$)"),"g"),g=RegExp("<(?:a(?:n(?:t(?:A(?:r(?:t(?:i(?:f(?:a(?:c(?:t)?)?)?)?)?)?)?)?)?)?)?$","gm"),v=RegExp("".concat(m,"[\\s\\S]*?(?:").concat(h,"|$)"),"g"),b="ANTARTIFACTLINK";function y(e){var t;let n=e.match(/identifier="([^"]*)"/),r=n?n[1]:"",l=e.match(/type="([^"]*)"/),i=l?(t=l[1],Object.values(a).includes(t)?t:"text/plain"):"text/plain",s=e.match(/title="([^"]*)"/),o=s?s[1]:"Untitled artifact",c=e.match(/language="([^"]*)"/),u=c?c[1]:void 0,d=e.match(/isClosed="(true|false)"/);return{id:r,type:i,title:o,language:u,isClosed:d?"true"===d[1]:void 0}}function j(e){return e.replace(g,"")}function w(e){return A(j(e)).replace(f,(e,t,n)=>{if(!t||"string"!=typeof t)return"";{let{type:e,language:r}=y(t);return"text/markdown"!==e&&"string"==typeof n?"```".concat(r||d[e].syntaxName,"\n").concat(n.trimStart(),"\n```"):"\n".concat(n)}})}function N(e){return j(A(e).replace(v,(e,t)=>{let n=e.endsWith(h);return"<".concat(b," ").concat(t,' isClosed="').concat(n,'" />')}))}let k=(e,t)=>"create"===e.command||"rewrite"===e.command?e.content:"update"===e.command?void 0===t?e.new_str:t.includes(e.old_str)?t.replace(e.old_str,e.new_str):t.replace(e.old_str.trim(),e.new_str):null!=t?t:"";function _(e){var t;let n=(0,s.K)(e).matchAll(f),r=[];for(let t of n){let[n,a,l]=t,i=n.endsWith(h);if(!a||!l)continue;let{id:s,type:o,title:c,language:u}=y(a),d={command:"create",message:e.uuid||"",created_at:e.created_at,content:l.trimStart(),isClosed:i};r.push({id:s,currentVersion:d,type:o,title:c,language:u})}return null===(t=e.content)||void 0===t||t.map((t,n,a)=>{if("tool_use"===t.type&&"artifacts"===t.name&&t.input){let l;let i=(0,o.n)(t),s=n===a.length-1,{version_uuid:c,command:d,id:p,type:x="text/plain",title:m="",language:h,content:f="",old_str:g="",new_str:v=""}=u.parse(i);"create"===d||"rewrite"===d?l={uuid:c,command:d,message:e.uuid||"",created_at:e.created_at,content:f.trimStart(),isClosed:!s}:"update"===d&&""!==f?l={uuid:c,command:"rewrite",message:e.uuid||"",created_at:e.created_at,isClosed:!s,content:f}:"update"===d&&(l={uuid:c,command:"update",message:e.uuid||"",created_at:e.created_at,isClosed:!s,old_str:g,new_str:v}),void 0!==p&&void 0!==l&&r.push({id:p,currentVersion:l,type:x,title:m,language:h})}}),r}let C="antThinking",S="<".concat(C,">"),$=RegExp("".concat(S,"[\\s\\S]*?(?:</").concat(C,">|$)"),"g"),P=RegExp("<(?:a(?:n(?:t(?:T(?:h(?:i(?:n(?:k(?:i(?:n(?:g)?)?)?)?)?)?)?)?)?)?)?$","gm");function A(e){return e.replace(P,"").replace($,"")}},72001:function(e,t,n){n.d(t,{KF:function(){return a},XR:function(){return l},yI:function(){return i}});var r=n(44846);let a="antCitation",l=()=>{let{value:e}=(0,r.F)("applejacks"),{value:t}=(0,r.F)("cheerios");return e||t};function i(e,t){return e.map(e=>null==t?void 0:t.find(t=>t.doc_uuid===e)).filter(e=>!!e)}},24550:function(e,t,n){var r,a;n.d(t,{Y:function(){return r}}),(a=r||(r={})).Image="image",a.Blob="blob",a.SanitizedDocument="document"},90216:function(e,t,n){n.d(t,{g:function(){return r}});function r(e){let t=function(e){let t=[],n=0;for(;n<e.length;){let r=e[n];if(/\s/.test(r)){n++;continue}if("{[]}:,".includes(r)){t.push(r),n++;continue}if('"'===r){let a=r;n++;let l=!1,i=!1;for(;n<e.length;){if(a+=r=e[n],'"'===r&&!l){i=!0;break}l="\\"===r&&!l,n++}if(!i){if(a.slice(-5).includes("\\"))for(a=a.slice(0,a.lastIndexOf("\\"));a.endsWith("\\");)a=a.slice(0,-1);a+='"'}t.push(a),n++;continue}if(/[-0-9]/.test(r)){let r="";for(;n<e.length&&/[-0-9.eE+]/.test(e[n]);)r+=e[n],n++;if(!r.match(/\d$/))for(;r.length>0&&!r[r.length-1].match(/\d/);)r=r.slice(0,-1);t.push(r);continue}if(/[tfn]/.test(r)){let a="",l=["true","false","null"],i=l.filter(e=>e.startsWith(r));if(1===i.length)n+=(a=i[0]).length;else for(;n<e.length&&/[a-z]/.test(e[n])&&(a+=e[n],n++,!l.includes(a)););l.includes(a)&&t.push(a);continue}n++}return t}(e),n=[];for(let e of t)"{"===e||"["===e?n.push("{"===e?"}":"]"):("}"===e||"]"===e)&&n.length>0&&n.pop();n.reverse(),","===t[t.length-1]&&t.pop();let r=t.concat(n).join("");if(""===r)return null;try{return JSON.parse(r)}catch(r){let e=Math.max(t.lastIndexOf(","),t.lastIndexOf("{"),t.lastIndexOf("["));if(-1!==e){let r=t.slice(0,e+1);return","===r[r.length-1]&&r.pop(),JSON.parse(r.concat(n).join(""))}throw Error("Invalid JSON")}}},6932:function(e,t,n){n.d(t,{n:function(){return a}});var r=n(90216);let a=e=>{if(e.input&&Object.keys(e.input).length>0)return e.input;if(e.partial_json){let t={};try{t=(0,r.g)(e.partial_json)}catch(e){}return null!=t?t:{}}return{}}}}]);